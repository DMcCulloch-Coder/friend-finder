<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
        <title>Friend Finder</title> 

        
        <style>
        
            *,
            *::after,
            *::before {
                margin: 0;
                padding: 0;

            }

            html {
                font-size: 62.5%;
            }

            body {
                box-sizing: border-box;
                font-family: 'Roboto', sans-serif;
                font-size: 1.6rem;
                margin: 3px;
                padding: 1px;

                display: flex;
                flex-direction: column;
                min-height: 100vh;
                
            }

            a,
            a:visited,
            a:active {
                text-decoration: none;
                color: blueviolet;
                margin: 1rem;

            }

            a:hover,
            a:focus {
                text-decoration: none;
                color: red;

            }

            .container {
                width: 90%;
                margin: 0 auto;
                flex-grow: 1;

            }

            .header {
                text-align: center;
                margin-bottom: 5rem;

            }

            .header h1 {
                font-size: 8rem;
            }
            
            .main {
                text-align: center;
                line-height: 3rem;
            }

            .main input {
                width: 60%;
                padding: .5rem;
            }

            #submit {
                width: 8rem;
                margin: 1.5rem;
            }

            .footer {
                margin: 0 5rem;
                padding: 5rem;
            }

            .popup {
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
                width: 100%;
                background-color: rgba(0,0,0,.8);
                z-index: 2;
                opacity: 0;
                visibility: hidden;
                transition: all .3s;
            }

            .popup__close:link,
            .popup__close:visited {
                color: black;
                position: absolute;
                top: 1rem;
                right: 1rem;
                font-size: 3rem;
                text-decoration: none;
                display: inline-block;
                line-height: 1;
            }

            .popup__close:hover {
                color: red;
            }

            .popup__content {
                position: absolute;
                top: 50%;
                left: 50%;
                background-color: white;
                width: 75%;
                border-radius: 3px;
                opacity: 0;
                transform: translate(-50%, -50%) scale(1);
                transition: all .5s .2s;
                height: 50vh;
            }

            .popup__content--name {
                text-align: center;
                font-size: 3rem;
                padding: 2rem;
            }

            .popup__content--img {
                height: 30rem;
                margin: 0 auto;
                display: block;
            }
        
        </style>

    </head>

    <body>

        <div class="container">

            <header class="header">
                <h1>Survey</h1>

                <nav class="nav-links">
                    <a href="/">Home</a>
                    <a href="/survey">Survey</a>
                </nav>
            </header>

            <main class="main">
                <h2>Questions:</h2>
                <form action="" class="survey-form">
                    <p>Name (Required):</p>
                    <div class="form-group">
                        <input id="name" type="text">
                        <label for="name"></label>
                    </div>
                    <p>Link to Photo Image:</p>
                    <div class="form-group">
                        <input id="photo" type="text">
                        <label for="photo"></label>
                    </div>
                    <p>Your mind is always buzzing with unexplored ideas and plans.</p>
                    <div class="form-group">
                        <input id="question-1" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-1"></label>
                    </div>
                    <p>Generally speaking, you rely more on your experience than your imagination.</p>
                    <div class="form-group">
                        <input id="question-2" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-2"></label>
                    </div>
                    <p>You find it easy to stay relaxed and focused even when there is some pressure.</p>
                    <div class="form-group">
                        <input id="question-3" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-3"></label>
                    </div>
                    <p>You rarely do something just out of sheer curiosity.</p>
                    <div class="form-group">
                        <input id="question-4" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-4"></label>
                    </div>
                    <p>People can rarely upset you.</p>
                    <div class="form-group">
                        <input id="question-5" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-5"></label>
                    </div>
                    <p>It is often difficult for you to relate to other people’s feelings.</p>
                    <div class="form-group">
                        <input id="question-6" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-6"></label>
                    </div>
                    <p>In a discussion, truth should be more important than people’s sensitivities.</p>
                    <div class="form-group">
                        <input id="question-7" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-7"></label>
                    </div>
                    <p>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</p>
                    <div class="form-group">
                        <input id="question-8" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-8"></label>
                    </div>
                    <p>You rarely get carried away by fantasies and ideas.</p>
                    <div class="form-group">
                        <input id="question-9" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-9"></label>
                    </div>
                    <p>You feel more energetic after spending time with a group of people.</p>
                    <div class="form-group">
                        <input id="question-10" type="text" placeholder="1 (strongly disagree) - 5 (strongly agree)">
                        <label for="question-10"></label>
                    </div>
                    <input type="submit" value="Submit" id="submit">
                </form>
            </main>

        </div>

        <footer class="footer">

            <p>Created by: David McCulloch</p>

        </footer>

        <div class="popup" id="popup">
            <div class="popup__content">
                <div class="popup__content--name"></div>
                <div class="popup__content--img"></div>
                <a href="#" class="popup__close">&times;</a>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
        
        <script>
        
            $(document).ready(function() {

                $('#submit').on('click', (event) => {
                    event.preventDefault()

                    let user = {
                        "name": `${$('#name').val()}`,
                        "imgLink": `${$('#photo').val()}`,
                        "scores": [
                            `${$('#question-1').val()}`,
                            `${$('#question-2').val()}`,
                            `${$('#question-3').val()}`,
                            `${$('#question-4').val()}`,
                            `${$('#question-5').val()}`,
                            `${$('#question-6').val()}`,
                            `${$('#question-7').val()}`,
                            `${$('#question-8').val()}`,
                            `${$('#question-9').val()}`,
                            `${$('#question-10').val()}`
                        ]

                    }
                    $.ajax({
                        url: "/api",
                        method: "POST",
                        data: user
                    }).then((res) => {
                        $('.popup').css('visibility', 'visible')
                        $('.popup').css('opacity', '1')
                        $('.popup__content').css('opacity', '1')
                        
                        $('.popup__content--name').html(`<h1>${res.name}</h1>`);
                        $('.popup__content--img').html(`<img src='${res.imgLink}' />`)
                        
                        console.log(res)
                    })

                    $('.popup__close').on('click', () => {
                        $('.popup').css('visibility', 'hidden')
                        $('.popup').css('opacity', '0')
                        $('.popup__content').css('opacity', '0')
                    })

                })
            })
        
        </script>

    </body>

</html>